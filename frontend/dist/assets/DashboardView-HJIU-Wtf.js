import{c as I,N as z,T as q,S as U,a as Y,A as J,b as N}from"./index-CIeehwBn.js";import{B as M,a as $}from"./bigr-BzhtauNA.js";import{d as R,e as n,g as t,y as i,f as _,m as C,E as P,q as T,x as F,c as o,G as K,z as p,j as m,k as h,F as B,p as O,l as G,H as L,b as H,o as Q,r as k}from"./vendor-DoZ-jnr8.js";import{C as V,L as X,a as Z}from"./laptop-BOGU6WHe.js";import{G as tt}from"./globe-BQqjMCyN.js";import{C as et,A as st,p as at,a as ot,D as lt}from"./charts-bXXrv3Qx.js";import{R as W}from"./refresh-cw-CfSbMtIt.js";import{L as nt}from"./loader-circle-C8oF-5P-.js";/**
 * @license lucide-vue-next v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=I("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=I("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=I("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),dt={class:"glass-card rounded-xl p-5"},ut={class:"flex items-start justify-between"},mt={class:"flex-1 min-w-0"},xt={class:"text-xs font-medium uppercase tracking-wider text-slate-400"},gt={class:"mt-2 text-2xl font-bold text-white tabular-nums"},pt={key:0,class:"mt-1 flex items-center gap-1"},S=R({__name:"StatCard",props:{label:{},value:{},icon:{},trend:{},color:{}},setup(a){return(x,u)=>(o(),n("div",dt,[t("div",ut,[t("div",mt,[t("p",xt,i(a.label),1),t("p",gt,i(a.value),1),a.trend!==void 0?(o(),n("div",pt,[t("span",{class:_(["text-xs font-medium",a.trend>0?"text-emerald-400":a.trend<0?"text-rose-400":"text-slate-500"])},i(a.trend>0?"+":"")+i(a.trend)+"% ",3),u[0]||(u[0]=t("span",{class:"text-[10px] text-slate-500"},"vs last scan",-1))])):C("",!0)]),a.icon?(o(),n("div",{key:0,class:_(["flex h-10 w-10 shrink-0 items-center justify-center rounded-lg",a.color?"":"bg-cyan-500/10"]),style:P(a.color?{background:a.color+"1a"}:{})},[(o(),T(F(a.icon),{class:_(["h-5 w-5",a.color?"":"text-cyan-400"]),style:P(a.color?{color:a.color}:{})},null,8,["class","style"]))],6)):C("",!0)])]))}}),vt={class:"flex items-center gap-3"},ft={class:"min-w-0 flex-1"},ht={class:"text-xs text-slate-400 truncate"},yt={class:"text-lg font-bold text-white tabular-nums"},_t=R({__name:"CategoryCard",props:{category:{},count:{}},setup(a){const x=a,u=K(),d=p(()=>M[x.category]),l={Network:z,Globe:tt,Cpu:Z,Laptop:X,HelpCircle:V},c=p(()=>l[d.value.icon]??V);function v(){u.push({path:"/assets",query:{category:x.category}})}return(f,y)=>(o(),n("button",{class:"glass-card w-full rounded-xl p-4 text-left transition-all duration-200 cursor-pointer",onClick:v},[t("div",vt,[t("div",{class:_(["flex h-9 w-9 shrink-0 items-center justify-center rounded-lg",d.value.bgClass])},[(o(),T(F(c.value),{class:_(["h-4.5 w-4.5",d.value.textClass])},null,8,["class"]))],2),t("div",ft,[t("p",ht,i(d.value.label),1),t("p",yt,i(a.count),1)])])]))}}),bt={class:"h-64"},Ct=R({__name:"CategoryPieChart",props:{data:{}},setup(a){et.register(st,at,ot);const x=a,u=p(()=>({labels:$.map(l=>M[l].label),datasets:[{data:$.map(l=>x.data[l]||0),backgroundColor:$.map(l=>M[l].color+"80"),borderColor:$.map(l=>M[l].color),borderWidth:1,hoverBorderWidth:2,hoverOffset:6}]})),d={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"#94a3b8",padding:12,font:{size:11},usePointStyle:!0,pointStyleWidth:8}},tooltip:{backgroundColor:"rgba(15, 23, 42, 0.9)",titleColor:"#e2e8f0",bodyColor:"#94a3b8",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:10,cornerRadius:8,callbacks:{label:l=>{const c=l.dataset.data.reduce((f,y)=>f+y,0),v=c>0?(l.parsed/c*100).toFixed(1):"0";return` ${l.label}: ${l.parsed} (${v}%)`}}}},cutout:"65%",animation:{animateRotate:!0,animateScale:!0}};return(l,c)=>(o(),n("div",bt,[m(h(lt),{data:u.value,options:d},null,8,["data"])]))}}),wt={class:"space-y-1"},kt={key:0,class:"flex items-center justify-center py-8 text-sm text-slate-500"},$t={class:"flex h-7 w-7 shrink-0 items-center justify-center rounded-md bg-white/5"},Rt={class:"min-w-0 flex-1"},At={class:"flex items-center gap-2"},Dt={key:0,class:"text-[10px] font-medium uppercase tracking-wider text-slate-500"},St={key:0,class:"mt-0.5 flex items-center gap-1.5 text-xs"},Mt={class:"text-slate-500 truncate max-w-[120px]"},Lt={class:"text-slate-300 truncate max-w-[120px]"},Tt={key:1,class:"mt-0.5 text-xs text-emerald-400/70"},jt={key:2,class:"mt-0.5 text-xs text-rose-400/70"},Nt={class:"shrink-0 text-[10px] text-slate-500 tabular-nums"},Bt=R({__name:"RecentChanges",props:{changes:{}},setup(a){const x=a,u=p(()=>x.changes.slice(0,10)),d={icon:W,color:"text-amber-400",label:"Changed"},l={new_asset:{icon:it,color:"text-emerald-400",label:"New"},removed:{icon:ct,color:"text-rose-400",label:"Removed"},changed:d};function c(f){return l[f]??d}function v(f){const y=new Date(f),r=new Date().getTime()-y.getTime(),g=Math.floor(r/1e3);if(g<60)return`${g}s ago`;const w=Math.floor(g/60);if(w<60)return`${w}m ago`;const b=Math.floor(w/60);if(b<24)return`${b}h ago`;const s=Math.floor(b/24);return s<30?`${s}d ago`:y.toLocaleDateString()}return(f,y)=>{const A=H("RouterLink");return o(),n("div",wt,[u.value.length===0?(o(),n("div",kt," No recent changes detected ")):C("",!0),(o(!0),n(B,null,O(u.value,r=>(o(),n("div",{key:r.id,class:"flex items-center gap-3 rounded-lg px-3 py-2.5 transition-colors hover:bg-white/5"},[t("div",$t,[(o(),T(F(c(r.change_type).icon),{class:_(["h-3.5 w-3.5",c(r.change_type).color])},null,8,["class"]))]),t("div",Rt,[t("div",At,[m(A,{to:`/assets/${r.ip}`,class:"text-sm font-mono text-cyan-400 hover:text-cyan-300 hover:underline transition-colors"},{default:G(()=>[L(i(r.ip),1)]),_:2},1032,["to"]),r.field_name?(o(),n("span",Dt,i(r.field_name),1)):C("",!0)]),r.change_type==="changed"&&r.old_value?(o(),n("div",St,[t("span",Mt,i(r.old_value),1),m(h(rt),{class:"h-3 w-3 shrink-0 text-slate-600"}),t("span",Lt,i(r.new_value),1)])):r.change_type==="new_asset"?(o(),n("div",Tt," New asset discovered ")):r.change_type==="removed"?(o(),n("div",jt," Asset no longer detected ")):C("",!0)]),t("span",Nt,i(v(r.detected_at)),1)]))),128))])}}}),Gt={class:"space-y-6"},It={class:"flex items-center justify-between"},Ft=["disabled"],Et={key:0,class:"flex flex-col items-center justify-center py-20"},Pt={key:1,class:"glass-card mx-auto max-w-md rounded-xl p-8 text-center"},Vt={class:"mt-2 text-sm text-slate-400"},zt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},Ot={class:"grid grid-cols-2 gap-3 sm:grid-cols-3 lg:grid-cols-5"},Ht={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},Wt={class:"glass-panel rounded-xl p-5"},qt={class:"glass-panel rounded-xl p-5"},Ut={class:"mb-4 flex items-center justify-between"},Yt={key:0,class:"glass-panel rounded-xl p-5"},Jt={class:"mb-4 flex items-center justify-between"},Kt={class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},Qt={class:"text-center"},Xt={class:"text-3xl font-bold text-neon-cyan tabular-nums"},Zt={class:"text-center"},te={class:"text-center"},ee={class:"text-3xl font-bold text-emerald-400 tabular-nums"},se={class:"text-center"},ae={class:"text-3xl font-bold text-amber-400 tabular-nums"},me=R({__name:"DashboardView",setup(a){const x=k(!0),u=k(null),d=k(null),l=k(null),c=k(null),v=p(()=>{var s;return((s=d.value)==null?void 0:s.category_summary)??{}}),f=p(()=>{var s;return((s=d.value)==null?void 0:s.total_assets)??0}),y=p(()=>{if(!c.value)return 0;const{total_assets:s,unclassified:e}=c.value.breakdown;return s===0?0:Math.round((s-e)/s*100)}),A=p(()=>v.value.ag_ve_sistemler??0),r=p(()=>{var s;return((s=l.value)==null?void 0:s.changes.length)??0}),g=p(()=>{var s;return((s=c.value)==null?void 0:s.grade)??"-"}),w=p(()=>$.map(s=>({category:s,count:v.value[s]??0})));async function b(){x.value=!0,u.value=null;try{const[s,e,D]=await Promise.all([N.getAssets(),N.getChanges(50),N.getCompliance()]);d.value=s.data,l.value=e.data,c.value=D.data}catch(s){const e=s instanceof Error?s.message:"Failed to load dashboard data";u.value=e}finally{x.value=!1}}return Q(()=>{b()}),(s,e)=>{var E;const D=H("RouterLink");return o(),n("div",Gt,[t("div",It,[e[1]||(e[1]=t("div",null,[t("h1",{class:"text-2xl font-bold text-white"},"Dashboard"),t("p",{class:"mt-1 text-sm text-slate-400"}," Asset discovery and classification overview ")],-1)),t("button",{class:"flex items-center gap-2 rounded-lg bg-white/5 px-3 py-2 text-xs text-slate-400 transition-colors hover:bg-white/10 hover:text-slate-200",disabled:x.value,onClick:b},[m(h(W),{class:_(["h-3.5 w-3.5",{"animate-spin":x.value}])},null,8,["class"]),e[0]||(e[0]=L(" Refresh ",-1))],8,Ft)]),x.value&&!d.value?(o(),n("div",Et,[m(h(nt),{class:"h-8 w-8 animate-spin text-cyan-400"}),e[2]||(e[2]=t("p",{class:"mt-3 text-sm text-slate-400"},"Loading dashboard data...",-1))])):u.value&&!d.value?(o(),n("div",Pt,[m(h(q),{class:"mx-auto h-10 w-10 text-amber-400"}),e[3]||(e[3]=t("h2",{class:"mt-3 text-lg font-semibold text-white"}," Unable to Load Data ",-1)),t("p",Vt,i(u.value),1),t("button",{class:"mt-4 rounded-lg bg-cyan-500/20 px-4 py-2 text-sm font-medium text-cyan-400 transition-colors hover:bg-cyan-500/30",onClick:b}," Try Again ")])):(o(),n(B,{key:2},[t("div",zt,[m(S,{label:"Total Assets",value:f.value,icon:h(U),color:"#06b6d4"},null,8,["value","icon"]),m(S,{label:"Classified",value:`${y.value}%`,icon:h(Y),color:"#10b981"},null,8,["value","icon"]),m(S,{label:"Network & Systems",value:A.value,icon:h(z),color:"#3b82f6"},null,8,["value","icon"]),m(S,{label:"Recent Changes",value:r.value,icon:h(J),color:"#f59e0b"},null,8,["value","icon"])]),t("div",null,[e[4]||(e[4]=t("h2",{class:"mb-3 text-sm font-medium uppercase tracking-wider text-slate-400"}," Asset Categories ",-1)),t("div",Ot,[(o(!0),n(B,null,O(w.value,j=>(o(),T(_t,{key:j.category,category:j.category,count:j.count},null,8,["category","count"]))),128))])]),t("div",Ht,[t("div",Wt,[e[5]||(e[5]=t("h3",{class:"mb-4 text-sm font-medium text-slate-300"}," Category Distribution ",-1)),m(Ct,{data:v.value},null,8,["data"])]),t("div",qt,[t("div",Ut,[e[7]||(e[7]=t("h3",{class:"text-sm font-medium text-slate-300"}," Recent Changes ",-1)),m(D,{to:"/analytics",class:"text-xs text-cyan-400 hover:text-cyan-300 transition-colors"},{default:G(()=>[...e[6]||(e[6]=[L(" View all ",-1)])]),_:1})]),m(Bt,{changes:((E=l.value)==null?void 0:E.changes)??[]},null,8,["changes"])])]),c.value?(o(),n("div",Yt,[t("div",Jt,[e[9]||(e[9]=t("h3",{class:"text-sm font-medium text-slate-300"}," Compliance Overview ",-1)),m(D,{to:"/compliance",class:"text-xs text-cyan-400 hover:text-cyan-300 transition-colors"},{default:G(()=>[...e[8]||(e[8]=[L(" Full report ",-1)])]),_:1})]),t("div",Kt,[t("div",Qt,[t("p",Xt,i(c.value.compliance_score)+"% ",1),e[10]||(e[10]=t("p",{class:"mt-1 text-xs text-slate-400"},"Compliance Score",-1))]),t("div",Zt,[t("p",{class:_(["text-3xl font-bold tabular-nums",{"text-emerald-400":g.value==="A"||g.value==="A+","text-cyan-400":g.value==="B","text-amber-400":g.value==="C","text-rose-400":g.value==="D"||g.value==="F","text-slate-400":g.value==="-"}])},i(g.value),3),e[11]||(e[11]=t("p",{class:"mt-1 text-xs text-slate-400"},"Grade",-1))]),t("div",te,[t("p",ee,i(c.value.breakdown.fully_classified),1),e[12]||(e[12]=t("p",{class:"mt-1 text-xs text-slate-400"},"Fully Classified",-1))]),t("div",se,[t("p",ae,i(c.value.breakdown.unclassified),1),e[13]||(e[13]=t("p",{class:"mt-1 text-xs text-slate-400"},"Unclassified",-1))])])])):C("",!0)],64))])}}});export{me as default};
//# sourceMappingURL=DashboardView-HJIU-Wtf.js.map
